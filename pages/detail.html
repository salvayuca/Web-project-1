<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tanam Pohon</title>

    <!-- CSS Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />

    <!-- CSS Internal -->
    <link rel="stylesheet" href="../assets/css/detail.css" />
  </head>

  <body>
    <!-- Navbar -->
    <nav
      class="navbar navbar-expand-lg navbar-light bg-light shadow-sm fixed-top"
    >
      <div class="container">
        <div class="logo text-uppercase">
          <a class="navbar-brand" href="../index.html#home"
            ><img src="../assets/img/logo.png" alt="earth" />Green Warrior</a
          >
        </div>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div
          class="collapse navbar-collapse text-center"
          id="navbarSupportedContent"
        >
          <ul class="navbar-nav container-fluid justify-content-end">
            <li class="nav-item">
              <a class="nav-link" href="../index.html#home">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../index.html#about">About Us</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="../index.html#gallery">Gallery</a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link active"
                aria-current="page"
                href="./actions.html"
                >Actions</a
              >
            </li>
          </ul>
          <div id="div-username">
            <span id="username"
              ><a
                class="btn btn-outline-success navbar-login"
                href="../pages/login.html"
                >Login</a
              ></span
            >
          </div>
        </div>
      </div>
    </nav>

    <section class="container mt-5">
      <div id="cardDecs" class="row g-5 pt-5"></div>
    </section>

    <!-- Modal -->
    <div
      class="modal fade"
      id="form"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Form Action</h5>

            <a
              type="button"
              class="close"
              data-bs-dismiss="modal"
              aria-label="Close"
            >
              <span class="close" aria-hidden="true">&times;</span>
            </a>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label for="inputNama" class="form-label">Nama Lengkap</label>
              <input type="name" class="form-control" id="inputNama" />
            </div>
            <div class="mb-3">
              <label for="inputEmail" class="form-label">Email</label>
              <input
                type="email"
                class="form-control"
                id="inputEmail"
                aria-describedby="emailHelp"
              />
            </div>
            <div class="mb-3">
              <label for="inputNoHp" class="form-label">No. HP</label>
              <input type="number" class="form-control" id="inputNoHp" />
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-success btnCancel"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button type="button" id="btnSubmit" class="btn btn-success">
              Submit
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <section class="last text-center">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320">
        <path
          fill="#5a8653"
          fill-opacity="1"
          d="M0,160L30,160C60,160,120,160,180,154.7C240,149,300,139,360,144C420,149,480,171,540,160C600,149,660,107,720,106.7C780,107,840,149,900,170.7C960,192,1020,192,1080,186.7C1140,181,1200,171,1260,170.7C1320,171,1380,181,1410,186.7L1440,192L1440,320L1410,320C1380,320,1320,320,1260,320C1200,320,1140,320,1080,320C1020,320,960,320,900,320C840,320,780,320,720,320C660,320,600,320,540,320C480,320,420,320,360,320C300,320,240,320,180,320C120,320,60,320,30,320L0,320Z"
        ></path>
      </svg>
      <div class="footer">
        <div class="container">
          <div class="row gx-5 pt-4">
            <!-- Logo -->
            <div class="col-md-4 logo">
              <a class="navbar-brand" href="#home"
                ><img src="../assets/img/logo.png" alt="earth" />Green
                Warrior</a
              >
            </div>
            <!-- About Us -->
            <div class="col-6 col-md-4" id="about-us">
              <h6 class="text-center fw-bolder">About Us</h6>
              <p>
                Green Warrior adalah website yang disediakan untuk anak muda
                agar lebih peduli dengan lingkungan
              </p>
            </div>
            <!-- Follow Us -->
            <div class="col-6 col-md-4" id="find-us">
              <h6 class="text-center fw-bolder">Find Us At</h6>
              <div class="icons d-flex justify-content-center">
                <img src="../assets/img/landing-page/facebook.png" alt="fb" />

                <img src="../assets/img/landing-page/twitter.png" alt="tw" />

                <img src="../assets/img/landing-page/instagram.png" alt="ig" />
              </div>
            </div>
          </div>
        </div>
        <hr />
        <div class="copyright text-center">
          <p class="mb-0 pb-3">
            Copyright Â© Green Warrior Indonesia 2021. All rights reserved.
          </p>
        </div>
      </div>
    </section>

    <!-- JS Bootstrap -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>

    <script type="module">
      import data from "../assets/js/dummy_data.js";

      // Username
      const elUsername = document.querySelector("#username");
      const username = localStorage.getItem("username");

      if (username) {
        elUsername.innerHTML = username;
      }
      const id = localStorage.getItem("id");

      data.forEach((detail) => {
        if (detail.id === Number(id)) {
          const elRow = document.getElementById("cardDecs");
          elRow.insertAdjacentHTML(
            "beforeend",

            `<div class="col-md-8 col-sm-12">
          <!-- Thumbnail -->
          <div class="row g-5">
            <img
              src=${detail?.image_url}
              class="image me-100 float-start"
              alt="Thumbnail"
            />
          </div>
          <!-- Description -->
          <div class="text-content" id="decs">
            <br />
            ${detail?.decs}
          </div>
        </div>

        <!-- Info Card -->
        <div class="category col-md-4 col-sm-12">
          <div class="joinCard text-content text-center w-100">
            <div class="title p-3">
              <h5><strong>${detail?.title}</strong></h5>
              <h6>${detail?.organization}</h6>
            </div>
            <div class="body p-3">
              <div class="joinTime">
                <div class="waktu">
                  <p>${detail?.schedule}</p>
                </div>
                <div class="lokasi">
                  <img src="../assets/img/placeholder.png" alt="icon" />
                  <a
                    href=${detail?.loc_url}
                    target="_blank"
                    >${detail?.location}</a
                  >
                </div>
                <br />
              </div>
              <p class="joinDeadline text-danger">
                ${detail?.maxRegist}
              </p>
              <br />
              <a
                class="joinButton btn btn-success"
                data-bs-toggle="modal"
                data-bs-target="#form"
                >JOIN</a
              ><br /><br />
            </div>
          </div>
        </div>`
          );
        }
      });

      const elNama = document.getElementById("inputNama");
      const elEmail = document.getElementById("inputEmail");
      const elnoHp = document.getElementById("inputNoHp");
      const btnSubmit = document.getElementById("btnSubmit");

      btnSubmit.addEventListener("click", function (e) {
        e.preventDefault();

        const nama = elNama.value;
        const email = elEmail.value;
        const nomor = elnoHp.value;
        const username = localStorage.getItem("username");
        const dataJoin = localStorage.getItem("data_" + id);
        if (username) {
          const data = { username, nama, email, nomor };

          if (id) {
            if (dataJoin) {
              const arrDataJoin = JSON.parse(dataJoin);
              const newDataJoin = [data, ...arrDataJoin];
              localStorage.setItem("data_" + id, JSON.stringify(newDataJoin));
            } else {
              localStorage.setItem("data_" + id, JSON.stringify([data]));
            }
            window.location.href = "./actions.html";
          }
        } else {
          localStorage.setItem("path", "./detail.html");
          window.location.href = "./login.html";
        }
      });
    </script>
  </body>
</html>
